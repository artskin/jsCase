<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
  <meta name="renderer" content="webkit">
  <title>js在线调试</title>
  <meta name="description" content="首页描述"/>
  <meta name="keywords" content="首页关键词"/>
  <meta name="author" content="Web Layout:amu"/>
  <link rel="stylesheet" href="style/case.css">
</head>
<body>
  <ul>
    <li>花生</li>
    <li>橘子</li>
    <li>豌豆</li>
  </ul>
<p>-------------------</p>
<h3>1.ajax异步文件上传</h3>
<div class="file-layer">
  <input class="input-file" type="file" id="file" name="file">
  <div class="file-moke">
    <input type="text"  value="未选择任何文件">
    <input class="btn btn-green" type="button" value="选择文件">
  </div>
  <div class="preview">
    <img src="" alt="" width="100" height="100">
  </div>
</div>
<pre><button class="run">run</button><code class="javascript" contenteditable="true">
  function uploadFile(obj){
    var fileData = new FormData();
    fileData.append("file",obj[0].files[0]);
    console.log(fileData);
    $.ajax({
      url : 'http://106.14.7.135:8081/upload/image',
      type : 'POST',
      dataType:"JSON",
      processData : false, //告诉jQ不要去处理发送的数据
      contentType : false, //告诉jQ不要设置Content-Type请求头
      data : fileData,
      success:function(data){
        console.log(data)
      }
    })
  }
  uploadFile($("#file"))
</code></pre>

<h3>1.定时器</h3>
<pre><button class="run">run</button><code class="javascript" contenteditable="true">
  var arr = [0,1,2,3];
  for(let i=0; i< arr.length; i++){
    setTimeout(function(){
      console.log("case1",i)
    },i*1000)
  }
</code></pre>

<h3>2.数组去重</h3>
<pre><button class="run">run</button><code class="javascript" contenteditable="true">
  var items = [1,'a','b',9,3,8,5,6,7,4,2,0];
  var lists = [0,'a',1,10,20,3,40,5,60,6];
  var sameArr=[];
  var diffArr=[];
  for(let i=0; i < items.length; i++){
    if(lists.indexOf(items[i]) != -1){
      sameArr.push(items[i]);
    }
    if(!lists.includes(items[i])){
      diffArr.push(items[i])
    }
  }
  console.log("sameArr",sameArr);
  console.log("diffArr",diffArr);
</code></pre>

<h3>3.数组排序</h3>
<pre><button class="run">run</button><code class="javascript" contenteditable="true">
  var arr = ['c',3,1,4,'v',2,5];
  function quick(arr){
    if(arr.length<=1){
      return arr;
    }
    var left = [];
    var right = [];
    var base = arr[0];
    for(var i=1;i < arr.length; i++){
      // 判决条件
      if(arr[i]>base){
        right.push(arr[i]);
      }else {
        left.push(arr[i])
      }
    }
    return quick(left).concat(base,quick(right));
  }
  console.log(quick(arr));
</code></pre>

<h3>4.js深度拷贝</h3>
<pre><button class="run">run</button><code class="javascript" contenteditable="true">
  var animal = {a:10,b:20,c:30}
  var people = animal;
  console.log("people",people);
  people.a = 100;

  console.log("people:",people)
  console.log("animal:",animal);
  console.log("----------")

  var dog = JSON.parse(JSON.stringify(animal))
  dog.b = 200
  console.log("animal:",animal);
  console.log("dog",dog)
</code></pre>
<h3>5.斐波那契额数列</h3>
<pre><button class="run">run</button><code class="javascript" contenteditable="true">
  function feibo(len) { 
    var fbarr = [1,1];
    for(let n =2;n < len;n++){
      fbarr[n] = fbarr[n-1]+fbarr[n-2];
    }
    return fbarr;
  }
  console.log(feibo(30));
</code></pre>
<h3>6.js执行顺序</h3>
<pre><button class="run">run</button><code class="javascript" contenteditable="true">
  var a="001";
  console.log(a);
  setTimeout(function(){
    console.log("timeout.a",a)
  },0);
  var b="002";
  console.log("b",b);
  //Promise
  new Promise(function executor(resolve) {
    console.log(1);
    for( var i=0 ; i<10 ; i++ ) {
      console.log("Promise",i)
      i == 9 && resolve();
    }
    console.log(2);
  }).then(function() {
    console.log("Promise.then",5);
  });
  
  var c="003";
  console.log("c",c);
</code></pre>
   
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="js/case.js"></script>
<script>
  $(function(){
    var data={
      code:""
    };

    $('pre code').each(function(i, block) {
      $(this).html("<ul><li>" + $(this).html().replace(/\n/g,"\n</li><li>") +"\n</li></ul>");
      hljs.highlightBlock(block);
    });

    $(".run").click(function(){
      //console.log($(this).next("code").text());
      data.code = $(this).next("code").text();
      new Function(
        data.code
      )();
    })
  })
</script>
</body>
</html>